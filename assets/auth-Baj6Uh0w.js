import{_ as u,t as p,g as k,e as y}from"./index-DhJAbDsU.js";const w="api/v1/",R=async(l,m)=>{var r,t;const{email:i,password:g}=l,{loading:d=null,toast:n=null,router:c=null}=m;(r=p(d))==null||r.show();try{await u({method:"get",url:`${w}auth/login`,params:{email:i.trim(),password:g.trim()}}).then(async e=>{const{message:s}=e;n==null||n({message:s,bg:"success"});const{user:a,token:o,tokenRefresh:h}=e.data;return{email:i.trim(),token:o,user:a}}).then(async e=>{const{email:s,token:a,user:o}=e;try{await u({method:"get",url:`${w}candidate/${s.trim()}`,token:a}).then(h=>{const{data:b}=h;k().setCandidate({...b})})}catch(h){throw new Error(h)}return{token:a,user:o}}).then(e=>{const{token:s,user:a}=e,o=y();o.setToken(s),o.setUser({...a}),c==null||c.push("/dashboard/information")}).catch(e=>{const{message:s}=e;n==null||n({message:s+"",bg:"danger"})})}catch(e){throw new Error(e)}(t=p(d))==null||t.hide()},x=async(l,m)=>{const{firstName:i,lastName:g,email:d,password:n,repassword:c}=l,{loading:r=null,toast:t=null,router:e=null}=m;r.show(),await u({method:"post",url:`${w}auth/register`,data:{firstName:i,lastName:g,email:d,password:n,repassword:c}}).then(s=>{const{message:a}=s;t==null||t({message:a,bg:"success"}),e==null||e.push("/login")}).catch(s=>{const{message:a}=s;t==null||t({message:a+"",bg:"danger"})}),r==null||r.hide()};export{x as a,R as h};
