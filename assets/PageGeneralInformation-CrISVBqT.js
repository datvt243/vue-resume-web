import{_ as K}from"./VeeForm-CBHmjhUX.js";import{T as j}from"./TableDefault-Cgwm9Yob.js";import{_ as U,u as O}from"./Modal-Tzfw6IMV.js";import{i as E,h as F,l as R,m as z,n as I,p as S,r as B,o as b,c as T,b as l,a as d,w as C,q as A,v as Q,k as X,f as V,F as q,g as L,x as J,y as P,z as M,A as W,B as Y,C as Z,d as ee,s as te,D as ne,j as ae}from"./index-CpXno4mj.js";import{a as H,S as le}from"./useDocument-CkwC1vFX.js";const oe={class:"block-container mb-5"},ie={key:0,class:"clearfix mb-3"},se=l("td",{style:{width:"100px"},class:"text-end"},"Action",-1),re={style:{width:"100px"},class:"text-end"},de=["onClick"],ue={class:"text-danger pe-2"},ce={class:"block-container"},me=l("button",{type:"button",class:"btn btn-secondary mx-3","data-bs-dismiss":"modal"},"Đóng",-1),N={__name:"VeeFormGeneralInformationUpdate",props:{heading:{type:String,default:""},fieldKey:{type:String,default:""},fields:{type:Array,default:()=>[]},hasButtonAdd:{type:Boolean,default:!1},modelValue:{type:[Array,Object],default:()=>({})}},setup(t){const $=E("candidate"),n=t,p=F(),s=F();function k(){var i,o;for(const m of h.value)u[m.name]=m.default;(i=p.value)==null||i.show(),(o=s.value)==null||o.reset()}const r=R({});z(()=>{f(n.modelValue)}),I(()=>n.modelValue,i=>{f(i)},{deep:!0});const h=S(()=>(r==null?void 0:r[n.fieldKey])||[]);function f(i){const o=i,e=(Array.isArray(o)?"array":"object")==="array"?o.length?o==null?void 0:o[0]:{}:o;for(const a of Object.keys(e))r[a]=e[a]}const{document:u,updatePatchDoc:v}=H({collection:"general-information",fields:h.value});async function g(i,o="create"){const m=$.value._id;if(!m)return;const{_flag:e,_list:a}=await(async()=>{let c=[];if(o==="create"){const G={...i};return c=[...h.value,G],{_flag:!0,_list:c}}const{value:_}=await le.fire({title:"Bạn có chắc là muốn xoá?",icon:"question",input:"text",html:'Vui lòng nhập vào <code class="code">"delete"</code> để xác nhận xoá',inputValue:"",inputPlaceholder:'Enter "delete" to delete',showCancelButton:!0,cancelButtonText:"Huỷ",confirmButtonText:"Xoá",customClass:{confirmButton:"btn btn-danger mx-1 bg-danger",cancelButton:"btn btn-secondary mx-1"},inputValidator:G=>{if(!G)return'Vui lòng nhập vào <span class="code">"delete"</span> để xác nhận xoá'}}),{index:x}=i;let w=[...h.value];return w.splice(x,1),{_flag:_==="delete",_list:w}})();e&&await v({_id:m,[n.fieldKey]:a},c=>{const{data:_}=c,x=_[n.fieldKey];x&&(r[n.fieldKey]=[...x],L().setGeneralInformation({[n.fieldKey]:r[n.fieldKey]}))})}return(i,o)=>{const m=B("FontAwesomeIcon"),e=B("Heading");return b(),T(q,null,[l("div",oe,[d(e,{text:n.heading},{default:C(()=>[n.hasButtonAdd?(b(),T("button",{key:0,class:"btn btn-sm btn-success",onClick:o[0]||(o[0]=a=>k())},[d(m,{icon:"fa-solid fa-plus"})])):A("",!0)]),_:1},8,["text"]),i.$slots.group?(b(),T("div",ie,[Q(i.$slots,"group")])):A("",!0),d(j,{"model-value":h.value,settings:n.fields,"cols-hidden":[],"col-control":"fullName","height-auto":!0},{theadMore:C(()=>[se]),tbodyMore:C(({doc:a})=>[l("td",re,[l("a",{class:"dropdown-item",href:"#",onClick:c=>g({...a},"delete")},[l("span",ue,[d(m,{icon:"fa-solid fa-trash"})])],8,de)])]),_:1},8,["model-value","settings"])]),n.hasButtonAdd?(b(),X(U,{key:0,ref_key:"refModal02",ref:p,title:V(u)._id?`Chỉnh sửa: ${n.heading}`:`Thêm mới ${n.heading}`,"is-hidden-footer":""},{default:C(()=>[l("div",ce,[d(K,{ref_key:"refVeeForm02",ref:s,fields:n.fields,document:V(u),"submit-fn":g,"submit-text":V(u)._id?"Cập nhật":"Thêm mới",buttonPosition:"end","reset-after-save":""},{button:C(()=>[me]),_:1},8,["fields","document","submit-text"])])]),_:1},8,["title"])):A("",!0)],64)}}},pe={class:"clearfix"},ge={class:"d-flex align-items-center mb-3"},he={class:"h6 m-0"},fe={class:"ps-4 m-0"},ve={class:"input-group input-group-sm mb-0"},_e={class:"tag-list"},xe={class:"badge text-bg-secondary"},ye=["onClick"],be={__name:"GroupTags",props:{title:{type:String,default:"Title"},handleAction:{type:Function,default:()=>{}},modelValue:{type:Array,default:()=>[]}},emits:["modelValue:update"],setup(t,{emit:$}){const n=$,p=t,s=P(()=>p.modelValue),k=F("");async function r(){s.value.push(k.value),await p.handleAction(s.value),k.value=""}async function h(f){s.value=s.value.filter(u=>u!==f),await p.handleAction(s.value)}return I(s,f=>{n("modelValue:update",f)}),(f,u)=>{const v=B("FontAwesomeIcon");return b(),T("div",pe,[l("div",ge,[l("p",he,M(p.title),1),l("div",fe,[l("div",ve,[W(l("input",{type:"text",class:"form-control",placeholder:"Thêm mới","onUpdate:modelValue":u[0]||(u[0]=g=>k.value=g)},null,512),[[Y,k.value]]),l("button",{class:"btn btn-outline-success",type:"button",onClick:u[1]||(u[1]=g=>r())},[d(v,{icon:"fa-solid fa-plus"})])])])]),l("ul",_e,[(b(!0),T(q,null,Z(s.value,(g,i)=>(b(),T("li",{key:`tag${i}`},[l("span",xe,[ee(M(g)+" ",1),l("span",{class:"text-danger pointer",onClick:o=>h(g)},[d(v,{icon:"fa-solid fa-times"})],8,ye)])]))),128))])])}}},ke=J(be,[["__scopeId","data-v-c8497415"]]),y="Vui lòng nhập",Ve=[{name:"_id",label:"ID",type:"hidden",placeholder:"Vui lòng nhập Vị trí mong muốn",valid:t=>t.string().nullable().default(null),default:null},{name:"positionDesired",label:"Vị trí mong muốn",type:"text",placeholder:"Vui lòng nhập Vị trí mong muốn",valid:t=>t.string().max(50).trim().required(y),default:""},{name:"career",label:"Ngành nghề",type:"text",placeholder:"Vui lòng nhập Ngành nghề",valid:t=>t.string().max(50).trim().required(y),default:""},{name:"levelCurrent",label:"Cấp bậc hiện tại",type:"select",options:[{text:"Thực tập sinh",value:"intern"},{text:"Nhân viên",value:"staff"},{text:"Trưởng nhóm",value:"teamLeader"},{text:"Quản lý",value:"manager"},{text:"Phó giám đốc",value:"viceDirector"},{text:"Giám đốc",value:"director"},{text:"Tổng giám đốc",value:"ceo"}],default:"staff",placeholder:"Vui lòng nhập Cấp bậc hiện tại",valid:t=>t.string().max(50).trim().required(y),col:"col-md-6"},{name:"levelDesired",label:"Cấp bậc mong muốn",type:"select",options:[{text:"Thực tập sinh",value:"intern"},{text:"Nhân viên",value:"staff"},{text:"Trưởng nhóm",value:"teamLeader"},{text:"Quản lý",value:"manager"},{text:"Phó giám đốc",value:"viceDirector"},{text:"Giám đốc",value:"director"},{text:"Tổng giám đốc",value:"ceo"}],default:"staff",placeholder:"Vui lòng nhập Cấp bậc mong muốn",valid:t=>t.string().max(50).trim().required(y),col:"col-md-6"},{name:"education",label:"Trình độ",type:"select",options:[{text:"Trung học phổ thông",value:"highSchool"},{text:"Trung cấp/Cao đẳng",value:"associateDegree"},{text:"Đại học",value:"bachelorDegree"},{text:"Thạc sĩ",value:"masterDegree"},{text:"Tiến sĩ",value:"doctorateDegree"}],default:"bachelorDegree",placeholder:"Vui lòng nhập Trình độ",valid:t=>t.string().trim().max(50).required(y),col:"col-md-6"},{name:"yearsOfExperience",label:"Số năm kinh nghiệm",type:"number",placeholder:"Vui lòng nhập Số năm kinh nghiệm",valid:t=>t.number("Vui lòng nhập vào số").integer("Vui lòng nhập vào số nguyên").min(0,"Số năm kinh nghiệm phải lớn hơn 0").required(y),default:"",col:"col-md-6"},{name:"salaryDesired",label:"Mức lương mong muốn",type:"currency",placeholder:"Vui lòng nhập Mức lương mong muốn",valid:t=>t.number("Vui lòng nhập vào số").integer("Vui lòng nhập vào số nguyên").positive("Mức lương mong muốn phải lớn hơn 0").required(y),default:""},{name:"workForm",label:"Hình thức làm việc",type:"select",options:[{value:"fulltime",text:"Toàn thời gian"},{value:"parttime",text:"Bán thời gian"},{value:"temporary",text:"Thời vụ"},{value:"internship",text:"Thử việc"},{value:"freelance",text:"Freelance"},{value:"contract",text:"Hợp đồng"},{value:"remote",text:"Làm việc từ xa"},{value:"consultant",text:"Cộng tác viên"}],placeholder:"Vui lòng nhập Mức lương mong muốn",valid:t=>t.string().required(y),default:"fulltime"},{name:"workLocation",label:"Địa điểm làm việc",type:"text",default:"",placeholder:"Vui lòng nhập Địa điểm làm việc",valid:t=>t.string().required(y)},{name:"careerGoal",label:"Mục tiêu công việc",type:"ckediter",default:"",placeholder:"Vui lòng nhập Mức lương mong muốn",valid:t=>t.string()}],Te={class:"block-container mb-5"},Ce={class:"btn-group"},$e=l("hr",{class:"border-success mb-5"},null,-1),D="Vui lòng nhập",Fe={__name:"PageGeneralInformation",setup(t){const $=F(!1),n=L(),p=te(Ve),{generalInformation:s,getData:k}=O({field:"generalInformation",collection:"general-information"}),{document:r,updateDoc:h,updatePatchDoc:f}=H({collection:"general-information",fields:p.value}),u=S(()=>{var e;return{_id:((e=n.getGeneralInformation)==null?void 0:e._id)||""}});ne("candidate",u),ae(()=>{$.value=!0}),I(s,e=>{const a=Array.isArray(e)?(e==null?void 0:e[0])||{}:e;for(const[c,_]of Object.entries(a))r[c]=_});const v=P(()=>r.professionalSkillsGroup);async function g(e){await f({_id:r._id,professionalSkillsGroup:e},a=>{const{data:c}=a;n.setCandidateByField({generalInformation:[c]}),r.professionalSkillsGroup=v.value})}async function i(e){const a={...e};await h(a,c=>{const{data:_}=c;n.setCandidateByField({generalInformation:[_]})})}const o=S(()=>[{name:"language",label:"Ngôn ngữ",type:"text",placeholder:"Vui lòng nhập Ngôn ngữ",valid:e=>e.string().trim().max(100,"Tối đa 100 ký tự").required(D),default:""},{name:"level",label:"Cấp độ",type:"select",options:[{value:"basic",text:"Cơ bản"},{value:"intermediate",text:"Trung bình"},{value:"advanced",text:"Khá"},{value:"expert",text:"Giỏi"}],placeholder:"Vui lòng nhập Cấp độ",valid:e=>e.string().trim().max(100,"Tối đa 100 ký tự").required(D),default:""}]),m=S(()=>[{name:"name",label:"Kỹ năng",type:"text",placeholder:"Vui lòng nhập kỹ năng",valid:e=>e.string().trim().max(100,"Tối đa 100 ký tự").required(D),default:""},{name:"exp",label:"Năm kinh nghiệm",type:"number",placeholder:"Vui lòng nhập Năm kinh nghiệm",valid:e=>e.number("Vui lòng nhập vào số").positive("Số năm kinh nghiệm nhỏ nhất bằng 0").required(D),default:""},{name:"group",label:"Nhóm",type:"select",options:(e=>e.map(a=>({value:a,text:a})))(v.value||[]),placeholder:"Vui lòng nhập Nhóm",valid:e=>e.string(),default:""}]);return(e,a)=>{const c=B("Button"),_=B("Heading");return b(),T(q,null,[l("div",Te,[d(_,{text:"Thông tin chung"},{default:C(()=>[l("div",Ce,[d(c,{onClick:a[0]||(a[0]=x=>{var w;return(w=V(k))==null?void 0:w()}),icon:"fa-solid fa-repeat",type:"outline-info",size:"sm"})])]),_:1}),d(K,{fields:p.value,document:V(r),"submit-fn":i,"submit-text":"Cập nhật"},null,8,["fields","document"])]),$.value?(b(),T(q,{key:0},[$e,d(N,{key:"professionalSkills","model-value":V(s),heading:"Kỹ năng chuyên môn","field-key":"professionalSkills","has-button-add":!0,fields:m.value},{group:C(()=>[d(ke,{title:"Danh sách nhóm",modelValue:v.value,"onUpdate:modelValue":a[1]||(a[1]=x=>v.value=x),"handle-action":g},null,8,["modelValue"])]),_:1},8,["model-value","fields"]),d(N,{key:"personalSkills","model-value":V(s),heading:"Kỹ năng cá nhân","field-key":"personalSkills","has-button-add":!0,fields:[{name:"name",label:"Kỹ năng",type:"text",placeholder:"Vui lòng nhập kỹ năng",valid:x=>x.string().trim().max(100,"Tối đa 100 ký tự").required(D),default:""}]},null,8,["model-value","fields"]),d(N,{key:"foreignLanguages","model-value":V(s),heading:"Ngoại ngữ","field-key":"foreignLanguages","has-button-add":!0,fields:o.value},null,8,["model-value","fields"])],64)):A("",!0)],64)}}};export{Fe as default};
