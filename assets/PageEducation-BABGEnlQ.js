import{_ as q}from"./VeeForm-D5DYDv5y.js";import{u as H,_ as N}from"./Modal-DO1FLvFb.js";import{E as O,p as w,G as T,r as p,o as f,k as B,w as h,b as u,a,h as $,s as R,c as k,f as r,F as E,C as z}from"./index-Bps_l_in.js";import{a as A}from"./useDocument-2iNXWpIi.js";import{d as P,e as S,f as G,c as U}from"./model.type-DgU_9viQ.js";const J={class:"btn-group"},K=O({__name:"EducationItem",props:{modelValue:{type:Object,default:()=>({_id:"",school:"",major:"",startDate:+new Date,endDate:+new Date,isCurrent:!1,description:"",image:""})}},emits:["onEdit","onDelete"],setup(m,{emit:v}){const D=v,b=m,l=w(()=>b.modelValue),s=w(()=>{const{startDate:g,endDate:n,isCurrent:d}=b.modelValue,c=T(g,"MM/YYYY"),_=d?"Hiện tại":T(n,"MM/YYYY");return`${c} - ${_}`}),y=w(()=>({title:l.value.school,subTitle:l.value.major,date:s.value,description:l.value.description}));return(g,n)=>{const d=p("FontAwesomeIcon"),c=p("ItemTemplate");return f(),B(c,{"model-value":y.value},{default:h(()=>[u("div",J,[u("a",{class:"btn btn-sm btn-outline-danger icon",href:"javascript:void(0)",onClick:n[0]||(n[0]=_=>D("onDelete",{...l.value}))},[a(d,{icon:"fa-solid fa-trash"})]),u("a",{class:"btn btn-sm btn-outline-warning icon",href:"javascript:void(0)",onClick:n[1]||(n[1]=_=>D("onEdit",{...l.value}))},[a(d,{icon:"fa-solid fa-square-pen"})])])]),_:1},8,["model-value"])}}}),M="Vui lòng nhập",V=[P,{name:"school",label:"Tên trường",type:"text",placeholder:"Vui lòng nhập Tên trường",valid:m=>m.string().max(100,"Tối đa 100 ký tự").required(M),default:""},{name:"major",label:"Chuyên ngành",type:"text",placeholder:"Vui lòng nhập Chuyên nhành",valid:m=>m.string().max(50,"Tối đa 50 ký tự").required(M),default:""},...S(!0),G({name:"isCurrent",label:"Đang học tại đây"}),U({name:"description",label:"Mô tả",required:!1})],Q={class:"mb-4"},W={class:"btn-group"},X={key:0,class:"clearfix"},Z={class:"block-container"},ee=u("button",{type:"button",class:"btn btn-secondary mx-3","data-bs-dismiss":"modal"},"Đóng",-1),ie={__name:"PageEducation",setup(m){const{educations:v,removeRecordById:D,addRecordToList:b,getData:l}=H({field:"educations",collection:"education"}),{document:s,updateDoc:y,deleteDoc:g}=A({collection:"education",fields:V}),n=$(),d=$(),c=R(V);async function _(o){const t=(e=>(e.startDate=+new Date(e.startDate),e.endDate=+new Date(e.endDate),!e.isCurrent&&(e.isCurrent=!1),e))({...o});await y(t,e=>{const{data:i}=e;b(i)})}async function Y(o){g({...o},"school",t=>{const{data:e}=t;D(e._id)})}function F(o){var e;const t=c.value.map(i=>i.name);for(const i of new Set(["_id",...t]))s[i]=o[i];(e=n.value)==null||e.show()}function I(){var o,t;for(const e of c.value)s[e.name]=e.default;(o=n.value)==null||o.show(),(t=d.value)==null||t.reset()}return(o,t)=>{const e=p("Button"),i=p("Heading"),j=p("ListTransition"),L=p("NoData");return f(),k(E,null,[u("div",Q,[a(i,{text:"Học vấn"},{default:h(()=>[u("div",W,[a(e,{onClick:t[0]||(t[0]=C=>I()),icon:"fa-solid fa-plus",type:"outline-success",size:"sm"}),a(e,{onClick:t[1]||(t[1]=C=>{var x;return(x=r(l))==null?void 0:x()}),icon:"fa-solid fa-repeat",type:"outline-info",size:"sm"})])]),_:1}),r(v).length?(f(),k("div",X,[a(j,null,{default:h(()=>[(f(!0),k(E,null,z(r(v),C=>(f(),k("li",{key:C._id},[a(K,{"model-value":C,icon:"fa-graduation-cap",onOnEdit:F,onOnDelete:Y},null,8,["model-value"])]))),128))]),_:1})])):(f(),B(L,{key:1}))]),a(N,{ref_key:"refModal",ref:n,title:r(s)._id?`Chỉnh sửa: ${r(s).school}`:"Thêm mới Học vấn","is-hidden-footer":""},{default:h(()=>[u("div",Z,[a(q,{ref_key:"refVeeForm",ref:d,fields:c.value,document:r(s),"submit-fn":_,"submit-text":r(s)._id?"Cập nhật":"Thêm mới",buttonPosition:"end"},{button:h(()=>[ee]),_:1},8,["fields","document","submit-text"])])]),_:1},8,["title"])],64)}}};export{ie as default};
