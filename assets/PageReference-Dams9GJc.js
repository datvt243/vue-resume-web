import{_ as q}from"./VeeForm-BJctlgFg.js";import{T as B}from"./TableDefault-BUl_Wrxy.js";import{u as H,_ as M}from"./Modal-BPO51vYk.js";import{a as R}from"./useDocument-CB5uqDja.js";import{d as $,b as I}from"./model.type-CMRk_XPP.js";import{h as b,s as E,r as f,o as L,c as P,b as e,a as n,w as c,f as a,F as S,B as A}from"./index-C58pkSHQ.js";const _="Vui lòng nhập",g=[$,{name:"fullName",label:"Họ tên người tham khảo",type:"text",placeholder:"Vui lòng nhập Họ tên người tham khảo",valid:l=>l.string().max(100,"Tối đa 100 ký tự").required(_),default:""},{name:"company",label:"Tên công ty",type:"text",placeholder:"Vui lòng nhập Tên công ty",valid:l=>l.string().max(100,"Tối đa 100 ký tự").required(_),default:""},{name:"position",label:"Vị trí công việc",type:"text",placeholder:"Vui lòng nhập Vị trí công việc",valid:l=>l.string().max(100,"Tối đa 100 ký tự").required(_),default:""},I({name:"phone",label:"Số điện thoại"})],z={class:"mb-4"},O=["onClick"],U={class:"text-warning pe-2"},X=e("span",null,"Sửa",-1),j=e("li",null,[e("hr",{class:"dropdown-divider"})],-1),G=["onClick"],J={class:"text-danger pe-2"},K=e("span",null,"Xoá",-1),Q={class:"block-container"},W=e("button",{type:"button",class:"btn btn-secondary mx-3","data-bs-dismiss":"modal"},"Đóng",-1),ae={__name:"PageReference",setup(l){const{references:v,removeRecordById:k,addRecordToList:w,getData:Y}=H({field:"references"}),x=["_id"],{document:i,updateDoc:y,deleteDoc:C}=R({collection:"reference",fields:g}),u=b(),h=b(),r=E(g);async function D(s){await y({...s},o=>{const{data:t}=o;w(t)})}function T(s){var t;const o=r.value.map(d=>d.name);for(const d of new Set(["_id",...o]))i[d]=s[d];(t=u.value)==null||t.show()}function V(){var s,o;for(const t of r.value)i[t.name]=t.default;(s=u.value)==null||s.show(),(o=h.value)==null||o.reset()}return(s,o)=>{const t=f("FontAwesomeIcon"),d=f("Heading"),F=f("Dropdown");return L(),P(S,null,[e("div",z,[n(d,{text:"Người tham khảo"},{default:c(()=>[e("button",{class:"btn btn-sm btn-success",onClick:o[0]||(o[0]=m=>V())},[n(t,{icon:"fa-solid fa-plus"})])]),_:1}),n(B,{"model-value":a(v),settings:r.value,"cols-hidden":x,"col-control":"fullName"},{control:c(({doc:m})=>[n(F,{text:"",style:"outline-success border-0",split:""},{default:c(()=>[e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:p=>T({...m})},[e("span",U,[n(t,{icon:"fa-solid fa-square-pen"})]),X],8,O)]),j,e("li",null,[e("a",{class:A(["dropdown-item",{disabled:!m._id}]),href:"#",onClick:()=>{a(C)({...m},"fullName",p=>{const{data:N}=p;a(k)(N._id)})}},[e("span",J,[n(t,{icon:"fa-solid fa-trash"})]),K],10,G)])]),_:2},1024)]),_:1},8,["model-value","settings"])]),n(M,{ref_key:"refModal",ref:u,title:a(i)._id?`Chỉnh sửa: ${a(i).school}`:"Thêm mới Người tham khảo","is-hidden-footer":""},{default:c(()=>[e("div",Q,[n(q,{ref_key:"refVeeForm",ref:h,fields:r.value,document:a(i),"submit-fn":D,"submit-text":a(i)._id?"Cập nhật":"Thêm mới",buttonPosition:"end"},{button:c(()=>[W]),_:1},8,["fields","document","submit-text"])])]),_:1},8,["title"])],64)}}};export{ae as default};
