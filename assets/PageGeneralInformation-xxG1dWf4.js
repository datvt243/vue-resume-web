import{_ as N}from"./VeeForm-BE4iP4uH.js";import{T as $}from"./TableDefault-DMrmW5nH.js";import{_ as L,u as H}from"./useCandidate-D_rKPtCI.js";import{h as S,l as P,m as j,n as A,p as E,r as F,o as y,c as V,b as m,a as d,w as _,q as M,k as O,e as s,F as I,g as K,s as R,j as U}from"./index-BVJ7n5iW.js";import{a as G,S as Q}from"./useDocument-CzQCdGR-.js";import"./TableDefault.vue_vue_type_style_index_1_scoped_121b7854_lang-DQM2dZnr.js";const X={class:"block-container mb-5"},z=m("td",{style:{width:"100px"},class:"text-end"},"Action",-1),J={style:{width:"100px"},class:"text-end"},W=["onClick"],Y={class:"text-danger pe-2"},Z={class:"block-container"},ee=m("button",{type:"button",class:"btn btn-secondary mx-3","data-bs-dismiss":"modal"},"Đóng",-1),D={__name:"VeeFormGeneralInformationUpdate",props:{id:{type:String,default:""},heading:{type:String,default:""},fieldKey:{type:String,default:""},fields:{type:Array,default:()=>[]},hasButtonAdd:{type:Boolean,default:!1},modelValue:{type:Array,default:()=>[]}},setup(e){const n=e,g=S(),x=S();function f(){var l,t;for(const i of h.value)v[i.name]=i.default;(l=g.value)==null||l.show(),(t=x.value)==null||t.reset()}const c=P({});j(()=>{k(n.modelValue)}),A(()=>n.modelValue,l=>{k(l)},{deep:!0});const h=E(()=>(c==null?void 0:c[n.fieldKey])||[]);function k(l){const t=l,u=(Array.isArray(t)?"array":"object")==="array"?t.length?t==null?void 0:t[0]:{}:t;for(const o of Object.keys(u))c[o]=u[o]}const{document:v,updatePatchDoc:T}=G({collection:"general-information",fields:h.value});async function a(l,t="create"){const i=n.id;if(!i)return;const{_flag:u,_list:o}=await(async()=>{let p=[];if(t==="create"){const B={...l};return p=[...h.value,B],{_flag:!0,_list:p}}const{value:C}=await Q.fire({title:"Bạn có chắc là muốn xoá?",icon:"question",input:"text",html:'Vui lòng nhập vào <code class="code">"delete"</code> để xác nhận xoá',inputValue:"",inputPlaceholder:'Enter "delete" to delete',showCancelButton:!0,cancelButtonText:"Huỷ",confirmButtonText:"Xoá",customClass:{confirmButton:"btn btn-danger mx-1 bg-danger",cancelButton:"btn btn-secondary mx-1"},inputValidator:B=>{if(!B)return'Vui lòng nhập vào <span class="code">"delete"</span> để xác nhận xoá'}}),{index:q}=l;let w=[...h.value];return w.splice(q,1),{_flag:C==="delete",_list:w}})();u&&await T({_id:i,[n.fieldKey]:o},p=>{const{data:C}=p,q=C[n.fieldKey];c[n.fieldKey]=[...q],K().setGeneralInformation({[n.fieldKey]:c[n.fieldKey]})})}return(l,t)=>{const i=F("FontAwesomeIcon"),u=F("Heading");return y(),V(I,null,[m("div",X,[d(u,{text:n.heading},{default:_(()=>[n.hasButtonAdd?(y(),V("button",{key:0,class:"btn btn-sm btn-success",onClick:t[0]||(t[0]=o=>f())},[d(i,{icon:"fa-solid fa-plus"})])):M("",!0)]),_:1},8,["text"]),d($,{"model-value":h.value,settings:n.fields,"cols-hidden":[],"col-control":"fullName","height-auto":!0},{theadMore:_(()=>[z]),tbodyMore:_(({doc:o})=>[m("td",J,[m("a",{class:"dropdown-item",href:"#",onClick:p=>a({...o},"delete")},[m("span",Y,[d(i,{icon:"fa-solid fa-trash"})])],8,W)])]),_:1},8,["model-value","settings"])]),n.hasButtonAdd?(y(),O(L,{key:0,ref_key:"refModal02",ref:g,title:s(v)._id?`Chỉnh sửa: ${n.heading}`:`Thêm mới ${n.heading}`,"is-hidden-footer":""},{default:_(()=>[m("div",Z,[d(N,{ref_key:"refVeeForm02",ref:x,fields:n.fields,document:s(v),"submit-fn":a,"submit-text":s(v)._id?"Cập nhật":"Thêm mới",buttonPosition:"end","reset-after-save":""},{button:_(()=>[ee]),_:1},8,["fields","document","submit-text"])])]),_:1},8,["title"])):M("",!0)],64)}}},r="Vui lòng nhập",te=[{name:"_id",label:"ID",type:"hidden",placeholder:"Vui lòng nhập Vị trí mong muốn",valid:e=>e.string().nullable().default(null),default:null},{name:"positionDesired",label:"Vị trí mong muốn",type:"text",placeholder:"Vui lòng nhập Vị trí mong muốn",valid:e=>e.string().max(50).trim().required(r),default:""},{name:"career",label:"Ngành nghề",type:"text",placeholder:"Vui lòng nhập Ngành nghề",valid:e=>e.string().max(50).trim().required(r),default:""},{name:"levelCurrent",label:"Cấp bậc hiện tại",type:"select",options:[{text:"Thực tập sinh",value:"intern"},{text:"Nhân viên",value:"staff"},{text:"Trưởng nhóm",value:"teamLeader"},{text:"Quản lý",value:"manager"},{text:"Phó giám đốc",value:"viceDirector"},{text:"Giám đốc",value:"director"},{text:"Tổng giám đốc",value:"ceo"}],default:"staff",placeholder:"Vui lòng nhập Cấp bậc hiện tại",valid:e=>e.string().max(50).trim().required(r),col:"col-md-6"},{name:"levelDesired",label:"Cấp bậc mong muốn",type:"select",options:[{text:"Thực tập sinh",value:"intern"},{text:"Nhân viên",value:"staff"},{text:"Trưởng nhóm",value:"teamLeader"},{text:"Quản lý",value:"manager"},{text:"Phó giám đốc",value:"viceDirector"},{text:"Giám đốc",value:"director"},{text:"Tổng giám đốc",value:"ceo"}],default:"staff",placeholder:"Vui lòng nhập Cấp bậc mong muốn",valid:e=>e.string().max(50).trim().required(r),col:"col-md-6"},{name:"education",label:"Trình độ",type:"select",options:[{text:"Trung học phổ thông",value:"highSchool"},{text:"Trung cấp/Cao đẳng",value:"associateDegree"},{text:"Đại học",value:"bachelorDegree"},{text:"Thạc sĩ",value:"masterDegree"},{text:"Tiến sĩ",value:"doctorateDegree"}],default:"bachelorDegree",placeholder:"Vui lòng nhập Trình độ",valid:e=>e.string().trim().max(50).required(r),col:"col-md-6"},{name:"yearsOfExperience",label:"Số năm kinh nghiệm",type:"number",placeholder:"Vui lòng nhập Số năm kinh nghiệm",valid:e=>e.number("Vui lòng nhập vào số").integer("Vui lòng nhập vào số nguyên").min(0,"Số năm kinh nghiệm phải lớn hơn 0").required(r),default:"",col:"col-md-6"},{name:"salaryDesired",label:"Mức lương mong muốn",type:"currency",placeholder:"Vui lòng nhập Mức lương mong muốn",valid:e=>e.number("Vui lòng nhập vào số").integer("Vui lòng nhập vào số nguyên").positive("Mức lương mong muốn phải lớn hơn 0").required(r),default:""},{name:"workForm",label:"Hình thức làm việc",type:"select",options:[{value:"fulltime",text:"Toàn thời gian"},{value:"parttime",text:"Bán thời gian"},{value:"temporary",text:"Thời vụ"},{value:"internship",text:"Thử việc"},{value:"freelance",text:"Freelance"},{value:"contract",text:"Hợp đồng"},{value:"remote",text:"Làm việc từ xa"},{value:"consultant",text:"Cộng tác viên"}],placeholder:"Vui lòng nhập Mức lương mong muốn",valid:e=>e.string().required(r),default:"fulltime"},{name:"workLocation",label:"Địa điểm làm việc",type:"text",default:"",placeholder:"Vui lòng nhập Địa điểm làm việc",valid:e=>e.string().required(r)},{name:"careerGoal",label:"Mục tiêu công việc",type:"ckediter",default:"",placeholder:"Vui lòng nhập Mức lương mong muốn",valid:e=>e.string().required(r)}],ne={class:"block-container mb-5"},ae=m("hr",{class:"border-success mb-5"},null,-1),b="Vui lòng nhập",ce={__name:"PageGeneralInformation",setup(e){const n=S(!1),g=K(),x=R(te),{generalInformation:f}=H({field:"generalInformation",collection:"general-information"}),{document:c,updateDoc:h}=G({collection:"general-information",fields:x.value});U(()=>{n.value=!0}),A(f,a=>{const l=Array.isArray(a)?(a==null?void 0:a[0])||{}:a;for(const[t,i]of Object.entries(l))c[t]=i});async function k(a){const l={...a};console.log({document:l}),await h(l,t=>{const{data:i}=t;g.setCandidateByField({generalInformation:[i]})})}const v=[{name:"language",label:"Ngôn ngữ",type:"text",placeholder:"Vui lòng nhập Ngôn ngữ",valid:a=>a.string().trim().max(100,"Tối đa 100 ký tự").required(b),default:""},{name:"level",label:"Cấp độ",type:"select",options:[{value:"basic",text:"Cơ bản"},{value:"intermediate",text:"Trung bình"},{value:"advanced",text:"Khá"},{value:"expert",text:"Giỏi"}],placeholder:"Vui lòng nhập Cấp độ",valid:a=>a.string().trim().max(100,"Tối đa 100 ký tự").required(b),default:""}],T=[{name:"name",label:"Kỹ năng",type:"text",placeholder:"Vui lòng nhập kỹ năng",valid:a=>a.string().trim().max(100,"Tối đa 100 ký tự").required(b),default:""},{name:"exp",label:"Năm kinh nghiệm",type:"number",placeholder:"Vui lòng nhập Năm kinh nghiệm",valid:a=>a.number("Vui lòng nhập vào số").positive("Số năm kinh nghiệm nhỏ nhất bằng 0").required(b),default:""}];return(a,l)=>{var i,u,o;const t=F("Heading");return y(),V(I,null,[m("div",ne,[d(t,{text:"Thông tin chung"}),d(N,{fields:x.value,document:s(c),"submit-fn":k,"submit-text":"Cập nhật"},null,8,["fields","document"])]),n.value?(y(),V(I,{key:0},[ae,d(D,{key:"professionalSkills","model-value":s(f),id:((i=s(g).getGeneralInformation)==null?void 0:i._id)||"",heading:"Kỹ năng chuyên môn","field-key":"professionalSkills","has-button-add":!0,fields:T},null,8,["model-value","id"]),d(D,{key:"personalSkills","model-value":s(f),id:((u=s(g).getGeneralInformation)==null?void 0:u._id)||"",heading:"Kỹ năng cá nhân","field-key":"personalSkills","has-button-add":!0,fields:[{name:"name",label:"Kỹ năng",type:"text",placeholder:"Vui lòng nhập kỹ năng",valid:p=>p.string().trim().max(100,"Tối đa 100 ký tự").required(b),default:""}]},null,8,["model-value","id","fields"]),d(D,{key:"foreignLanguages","model-value":s(f),id:((o=s(g).getGeneralInformation)==null?void 0:o._id)||"",heading:"Ngoại ngữ","field-key":"foreignLanguages","has-button-add":!0,fields:v},null,8,["model-value","id"])],64)):M("",!0)],64)}}};export{ce as default};
