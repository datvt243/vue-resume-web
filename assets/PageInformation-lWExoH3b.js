import{_ as u}from"./VeeForm-ZD-0KBCl.js";import{g,s as p,h,c as f,a as b,j as _,r as x,o as r}from"./index-DAxs4nOd.js";import{u as y,a as v}from"./useDocument-SkqkMmzS.js";import{p as k}from"./regex.config-BmDLDyGj.js";const q={class:"block-container"},a="Vui lòng nhập",C={__name:"PageInformation",setup(N){const l=g(),{toast:o}=y(),d=p([{name:"firstName",label:"Họ",type:"text",placeholder:"Vui lòng nhập Họ",valid:e=>e.string().min(0).max(10,"Tối đa 10 ký tự").required(a),default:"",col:"col-md-6"},{name:"lastName",label:"Tên",type:"text",placeholder:"Vui lòng nhập Tên",valid:e=>e.string().min(0).max(30,"Tối đa 30 ký tự").required(a),default:"",col:"col-md-6"},{name:"gender",label:"Giới tính",type:"select",options:[{value:0,text:"Nữ"},{value:1,text:"Nam"}],valid:e=>e.string().required(a),default:0,col:"col-md-6"},{name:"marital",label:"Tình trạng hôn nhân",type:"select",options:[{value:0,text:"Độc thân"},{value:1,text:"Đã kết hôn"}],valid:e=>e.string().required(a),default:0,col:"col-md-6"},{name:"birthday",label:"Ngày sinh",type:"date",valid:e=>e.string().required(a),default:new Date("1990-01-01"),col:"col-md-12"},{name:"address",label:"Địa chỉ",type:"text",valid:e=>e.string().required(a),default:"",col:"col-md-12"},{name:"phone",label:"Số điện thoại",type:"text",valid:e=>e.string().matches(k,{excludeEmptyString:!0,message:"Số điện thoại không đúng định dạng. Bắt đầu bằng 84 hoặc 0, bao gồm 11 số"}).required(a),default:"",col:"col-md-12"},{name:"introduction",label:"Giới thiệu bản thân",type:"textarea",valid:e=>e.string().required(a),default:"",col:"col-md-12"}]),{updateDoc:s}=v({collection:"candidate",fields:d.value});h(()=>{const e=l.getCandidate;for(const n of d.value){const{name:i}=n;[i]in e&&(n.value=e[i])}});async function c(e){const n={...e};n._id=l.getId,n._id||o==null||o({message:"Xảy ra lỗi",bg:"danger"});const i=(t=>(t.gender=!!t.gender,t.marital=!!t.marital,t.birthday=+new Date(t.birthday),t))({...n});await s(i,t=>{const{data:m}=t;l.setCandidateByField({...m})})}return(e,n)=>{const i=x("Heading");return r(),f("div",q,[b(i,{text:"Thông tin cơ bản"}),(r(),_(u,{key:"frm1",fields:d.value,"submit-fn":c,"submit-text":"Cập nhật",buttonPosition:"center"},null,8,["fields"]))])}}};export{C as default};
