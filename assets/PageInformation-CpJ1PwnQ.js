import{_ as m}from"./VeeForm-DPBjbMmO.js";import{u as k,a as v}from"./useDocument-CWJ_8aVQ.js";import{g as q,h as u,j as M,c as N,b as f,a as p,k as h,F as B,r as w,o as c}from"./index-DDlzD-Q3.js";import{p as C}from"./regex.config-BmDLDyGj.js";const F={class:"block-container mb-5"},T={class:"block-container"},i="Vui lòng nhập",G={__name:"PageInformation",setup(D){const l=q(),{toast:d}=k(),s=u([{name:"firstName",label:"Họ",type:"text",placeholder:"Vui lòng nhập Họ",valid:e=>e.string().min(0).max(10,"Tối đa 10 ký tự").required(i),default:"",col:"col-md-6"},{name:"lastName",label:"Tên",type:"text",placeholder:"Vui lòng nhập Tên",valid:e=>e.string().min(0).max(30,"Tối đa 30 ký tự").required(i),default:"",col:"col-md-6"},{name:"gender",label:"Giới tính",type:"select",options:[{value:0,text:"Nữ"},{value:1,text:"Nam"}],valid:e=>e.string().required(i),default:0,col:"col-md-6"},{name:"marital",label:"Tình trạng hôn nhân",type:"select",options:[{value:0,text:"Độc thân"},{value:1,text:"Đã kết hôn"}],valid:e=>e.string().required(i),default:0,col:"col-md-6"},{name:"birthday",label:"Ngày sinh",type:"date",valid:e=>e.string().required(i),default:new Date("1990-01-01"),col:"col-md-12"},{name:"address",label:"Địa chỉ",type:"text",valid:e=>e.string().required(i),default:"",col:"col-md-12"},{name:"phone",label:"Số điện thoại",type:"text",valid:e=>e.string().matches(C,{excludeEmptyString:!0,message:"Số điện thoại không đúng định dạng. Bắt đầu bằng 84 hoặc 0, bao gồm 11 số"}).required(i),default:"",col:"col-md-12"},{name:"introduction",label:"Giới thiệu bản thân",type:"textarea",valid:e=>e.string().required(i),default:"",col:"col-md-12"}]),r=u([{name:"socialMedia.github",label:"Github",type:"text",default:"",col:"col-md-12"},{name:"socialMedia.linkedin",label:"Linkedin",type:"text",default:"",col:"col-md-12"},{name:"socialMedia.website",label:"Website",type:"text",default:"",col:"col-md-12"}]),{updateDoc:g,updatePatchDoc:b}=v({collection:"candidate",fields:s.value});M(()=>{const e=l.getCandidate;for(const a of s.value){const{name:t}=a;[t]in e&&(a.value=e[t])}const{socialMedia:n={}}=e;for(const a of r.value){const{name:t}=a,[,o]=t.split(".");a.value=n[o]||""}});async function y(e){const n={...e};n._id=l.getId,n._id||d==null||d({message:"Xảy ra lỗi",bg:"danger"});const a=(t=>(t.gender=!!t.gender,t.marital=!!t.marital,t.birthday=+new Date(t.birthday),t))({...n});await g(a,t=>{const{data:o}=t;l.setCandidateByField({...o})})}async function x(e){const{socialMedia:n}=e,a=l.getId;if(!a)return!1;await b({_id:a,socialMedia:n},t=>{const{data:o}=t,{socialMedia:_}=o;l.setCandidateByField({socialMedia:_})})}return(e,n)=>{const a=w("Heading");return c(),N(B,null,[f("div",F,[p(a,{text:"Thông tin cơ bản"}),(c(),h(m,{key:"frm1",fields:s.value,"submit-fn":y,"submit-text":"Cập nhật",buttonPosition:"center"},null,8,["fields"]))]),f("div",T,[p(a,{text:"Liên kết mạng xã hội"}),(c(),h(m,{key:"frm1",fields:r.value,"submit-fn":x,"submit-text":"Cập nhật",buttonPosition:"center"},null,8,["fields"]))])],64)}}};export{G as default};
