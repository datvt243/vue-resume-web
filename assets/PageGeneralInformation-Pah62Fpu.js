import{_ as N}from"./VeeForm-DPBjbMmO.js";import{T as M}from"./TableDefault-BbbMhPoh.js";import{_ as G,u as $}from"./useCandidate-DgI-Q6vb.js";import{h as q,l as L,m as A,n as H,r as B,o as b,c as _,b as c,a as s,w as x,p as D,k as P,e as r,F as S,g as I,s as j,j as E}from"./index-DDlzD-Q3.js";import{a as K,S as O}from"./useDocument-CWJ_8aVQ.js";import"./TableDefault.vue_vue_type_style_index_1_scoped_121b7854_lang-Cfcm6P_0.js";const U={class:"block-container mb-5"},Q=c("td",{style:{width:"100px"},class:"text-end"},"Action",-1),R={style:{width:"100px"},class:"text-end"},X=["onClick"],z={class:"text-danger pe-2"},J={class:"block-container"},W=c("button",{type:"button",class:"btn btn-secondary mx-3","data-bs-dismiss":"modal"},"Đóng",-1),w={__name:"VeeFormGeneralInformationUpdate",props:{id:{type:String,default:""},heading:{type:String,default:""},fieldKey:{type:String,default:""},fields:{type:Array,default:()=>[]},hasButtonAdd:{type:Boolean,default:!1},modelValue:{type:Array,default:()=>[]}},setup(F){const n=F,m=q(),f=q();function h(){var e,t;for(const a of g.value)p[a.name]=a.default;(e=m.value)==null||e.show(),(t=f.value)==null||t.reset()}const d=L({});A(()=>n.modelValue,e=>{const t=e,i=(Array.isArray(t)?"array":"object")==="array"?t.length?t==null?void 0:t[0]:{}:t;for(const o of Object.keys(i))d[o]=i[o]},{deep:!0});const g=H(()=>(d==null?void 0:d[n.fieldKey])||[]),{document:p,updatePatchDoc:k}=K({collection:"general-information",fields:g.value});async function y(e,t="create"){const a=n.id;if(!a)return;const{_flag:i,_list:o}=await(async()=>{let u=[];if(t==="create"){const C={...e};return u=[...g.value,C],{_flag:!0,_list:u}}const{value:v}=await O.fire({title:"Bạn có chắc là muốn xoá?",icon:"question",input:"text",html:'Vui lòng nhập vào <code class="code">"delete"</code> để xác nhận xoá',inputValue:"",inputPlaceholder:'Enter "delete" to delete',showCancelButton:!0,cancelButtonText:"Huỷ",confirmButtonText:"Xoá",customClass:{confirmButton:"btn btn-danger mx-1 bg-danger",cancelButton:"btn btn-secondary mx-1"},inputValidator:C=>{if(!C)return'Vui lòng nhập vào <span class="code">"delete"</span> để xác nhận xoá'}}),{index:V}=e;let T=[...g.value];return T.splice(V,1),{_flag:v==="delete",_list:T}})();i&&await k({_id:a,[n.fieldKey]:o},u=>{const{data:v}=u,V=v[n.fieldKey];d[n.fieldKey]=[...V],I().setGeneralInformation({[n.fieldKey]:d[n.fieldKey]})})}return(e,t)=>{const a=B("FontAwesomeIcon"),i=B("Heading");return b(),_(S,null,[c("div",U,[s(i,{text:n.heading},{default:x(()=>[n.hasButtonAdd?(b(),_("button",{key:0,class:"btn btn-sm btn-success",onClick:t[0]||(t[0]=o=>h())},[s(a,{icon:"fa-solid fa-plus"})])):D("",!0)]),_:1},8,["text"]),s(M,{"model-value":g.value,settings:n.fields,"cols-hidden":[],"col-control":"fullName","height-auto":!0},{theadMore:x(()=>[Q]),tbodyMore:x(({doc:o})=>[c("td",R,[c("a",{class:"dropdown-item",href:"#",onClick:u=>y({...o},"delete")},[c("span",z,[s(a,{icon:"fa-solid fa-trash"})])],8,X)])]),_:1},8,["model-value","settings"])]),n.hasButtonAdd?(b(),P(G,{key:0,ref_key:"refModal02",ref:m,title:r(p)._id?`Chỉnh sửa: ${n.heading}`:`Thêm mới ${n.heading}`,"is-hidden-footer":""},{default:x(()=>[c("div",J,[s(N,{ref_key:"refVeeForm02",ref:f,fields:n.fields,document:r(p),"submit-fn":y,"submit-text":r(p)._id?"Cập nhật":"Thêm mới",buttonPosition:"end","reset-after-save":""},{button:x(()=>[W]),_:1},8,["fields","document","submit-text"])])]),_:1},8,["title"])):D("",!0)],64)}}},Y={class:"block-container mb-5"},Z=c("hr",{class:"border-success mb-5"},null,-1),l="Vui lòng nhập",oe={__name:"PageGeneralInformation",setup(F){const n=q(!1),m=I(),f=j([{name:"_id",label:"ID",type:"hidden",placeholder:"Vui lòng nhập Vị trí mong muốn",valid:e=>e.string().nullable().default(null),default:null},{name:"positionDesired",label:"Vị trí mong muốn",type:"text",placeholder:"Vui lòng nhập Vị trí mong muốn",valid:e=>e.string().max(50).trim().required(l)},{name:"career",label:"Ngành nghề",type:"text",placeholder:"Vui lòng nhập Ngành nghề",valid:e=>e.string().max(50).trim().required(l)},{name:"levelCurrent",label:"Cấp bậc hiện tại",type:"select",options:[{text:"Thực tập sinh",value:"intern"},{text:"Nhân viên",value:"staff"},{text:"Trưởng nhóm",value:"teamLeader"},{text:"Quản lý",value:"manager"},{text:"Phó giám đốc",value:"viceDirector"},{text:"Giám đốc",value:"director"},{text:"Tổng giám đốc",value:"ceo"}],default:"staff",placeholder:"Vui lòng nhập Cấp bậc hiện tại",valid:e=>e.string().max(50).trim().required(l),col:"col-md-6"},{name:"levelDesired",label:"Cấp bậc mong muốn",type:"select",options:[{text:"Thực tập sinh",value:"intern"},{text:"Nhân viên",value:"staff"},{text:"Trưởng nhóm",value:"teamLeader"},{text:"Quản lý",value:"manager"},{text:"Phó giám đốc",value:"viceDirector"},{text:"Giám đốc",value:"director"},{text:"Tổng giám đốc",value:"ceo"}],default:"staff",placeholder:"Vui lòng nhập Cấp bậc mong muốn",valid:e=>e.string().max(50).trim().required(l),col:"col-md-6"},{name:"education",label:"Trình độ",type:"select",options:[{text:"Trung học phổ thông",value:"highSchool"},{text:"Trung cấp/Cao đẳng",value:"associateDegree"},{text:"Đại học",value:"bachelorDegree"},{text:"Thạc sĩ",value:"masterDegree"},{text:"Tiến sĩ",value:"doctorateDegree"}],default:"bachelorDegree",placeholder:"Vui lòng nhập Trình độ",valid:e=>e.string().trim().max(50).required(l),col:"col-md-6"},{name:"yearsOfExperience",label:"Số năm kinh nghiệm",type:"number",placeholder:"Vui lòng nhập Số năm kinh nghiệm",valid:e=>e.number("Vui lòng nhập vào số").integer("Vui lòng nhập vào số nguyên").min(0,"Số năm kinh nghiệm phải lớn hơn 0").required(l),col:"col-md-6"},{name:"salaryDesired",label:"Mức lương mong muốn",type:"currency",placeholder:"Vui lòng nhập Mức lương mong muốn",valid:e=>e.number("Vui lòng nhập vào số").integer("Vui lòng nhập vào số nguyên").positive("Mức lương mong muốn phải lớn hơn 0").required(l)},{name:"workForm",label:"Hình thức làm việc",type:"select",options:[{value:"fulltime",text:"Toàn thời gian"},{value:"parttime",text:"Bán thời gian"},{value:"temporary",text:"Thời vụ"},{value:"internship",text:"Thử việc"},{value:"freelance",text:"Freelance"},{value:"contract",text:"Hợp đồng"},{value:"remote",text:"Làm việc từ xa"},{value:"consultant",text:"Cộng tác viên"}],placeholder:"Vui lòng nhập Mức lương mong muốn",valid:e=>e.string().required(l),default:"fulltime"},{name:"workLocation",label:"Địa điểm làm việc",type:"text",default:"",placeholder:"Vui lòng nhập Địa điểm làm việc",valid:e=>e.string().required(l)},{name:"careerGoal",label:"Mục tiêu công việc",type:"textarea",default:"",placeholder:"Vui lòng nhập Mức lương mong muốn",valid:e=>e.string().required(l)}]),{generalInformation:h}=$({field:"generalInformation",collection:"general-information"}),{document:d,updateDoc:g}=K({collection:"general-information",fields:f.value});E(()=>{n.value=!0}),A(h,e=>{const t=Array.isArray(e)?(e==null?void 0:e[0])||{}:e;for(const[a,i]of Object.entries(t))d[a]=i});async function p(e){const t={...e};console.log({document:t}),await g(t,a=>{const{data:i}=a;m.setCandidateByField({generalInformation:[i]})})}const k=[{name:"language",label:"Ngôn ngữ",type:"text",placeholder:"Vui lòng nhập Ngôn ngữ",valid:e=>e.string().trim().max(100,"Tối đa 100 ký tự").required(l),default:""},{name:"level",label:"Cấp độ",type:"select",options:[{value:"basic",text:"Cơ bản"},{value:"intermediate",text:"Trung bình"},{value:"advanced",text:"Khá"},{value:"expert",text:"Giỏi"}],placeholder:"Vui lòng nhập Cấp độ",valid:e=>e.string().trim().max(100,"Tối đa 100 ký tự").required(l),default:""}],y=[{name:"name",label:"Kỹ năng",type:"text",placeholder:"Vui lòng nhập kỹ năng",valid:e=>e.string().trim().max(100,"Tối đa 100 ký tự").required(l),default:""},{name:"exp",label:"Năm kinh nghiệm",type:"number",placeholder:"Vui lòng nhập Năm kinh nghiệm",valid:e=>e.number("Vui lòng nhập vào số").positive("Số năm kinh nghiệm nhỏ nhất bằng 0").required(l),default:""}];return(e,t)=>{var i,o,u;const a=B("Heading");return b(),_(S,null,[c("div",Y,[s(a,{text:"Thông tin chung"}),s(N,{fields:f.value,document:r(d),"submit-fn":p,"submit-text":"Cập nhật"},null,8,["fields","document"])]),n.value?(b(),_(S,{key:0},[Z,s(w,{key:"professionalSkills","model-value":r(h),id:((i=r(m).getGeneralInformation)==null?void 0:i._id)||"",heading:"Kỹ năng chuyên môn","field-key":"professionalSkills","has-button-add":!0,fields:y},null,8,["model-value","id"]),s(w,{key:"personalSkills","model-value":r(h),id:((o=r(m).getGeneralInformation)==null?void 0:o._id)||"",heading:"Kỹ năng cá nhân","field-key":"personalSkills","has-button-add":!0,fields:[{name:"name",label:"Kỹ năng",type:"text",placeholder:"Vui lòng nhập kỹ năng",valid:v=>v.string().trim().max(100,"Tối đa 100 ký tự").required(l),default:""}]},null,8,["model-value","id","fields"]),s(w,{key:"foreignLanguages","model-value":r(h),id:((u=r(m).getGeneralInformation)==null?void 0:u._id)||"",heading:"Ngoại ngữ","field-key":"foreignLanguages","has-button-add":!0,fields:k},null,8,["model-value","id"])],64)):D("",!0)],64)}}};export{oe as default};
