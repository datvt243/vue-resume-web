import{_ as K}from"./VeeForm-Duwk6dER.js";import{T as H}from"./TableDefault-C3WvCllL.js";import{_ as P,u as j}from"./Modal-DFIulcsf.js";import{i as E,h as M,l as O,m as R,n as $,p as I,r as V,o as _,c as T,b as d,a as o,w as f,q as N,k as U,f as m,F as A,g as G,s as Q,v as z,j as X}from"./index-DhJAbDsU.js";import{a as L,S as J}from"./useDocument-p6YVppS_.js";const W={class:"block-container mb-5"},Y=d("td",{style:{width:"100px"},class:"text-end"},"Action",-1),Z={style:{width:"100px"},class:"text-end"},ee=["onClick"],te={class:"text-danger pe-2"},ne={class:"block-container"},ae=d("button",{type:"button",class:"btn btn-secondary mx-3","data-bs-dismiss":"modal"},"Đóng",-1),S={__name:"VeeFormGeneralInformationUpdate",props:{heading:{type:String,default:""},fieldKey:{type:String,default:""},fields:{type:Array,default:()=>[]},hasButtonAdd:{type:Boolean,default:!1},modelValue:{type:Array,default:()=>[]}},setup(t){const b=E("candidate"),a=t,v=M(),g=M();function C(){var e,n;for(const l of h.value)p[l.name]=l.default;(e=v.value)==null||e.show(),(n=g.value)==null||n.reset()}const c=O({});R(()=>{y(a.modelValue)}),$(()=>a.modelValue,e=>{y(e)},{deep:!0});const h=I(()=>(c==null?void 0:c[a.fieldKey])||[]);function y(e){const n=e,i=(Array.isArray(n)?"array":"object")==="array"?n.length?n==null?void 0:n[0]:{}:n;for(const r of Object.keys(i))c[r]=i[r]}const{document:p,updatePatchDoc:q}=L({collection:"general-information",fields:h.value});async function k(e,n="create"){const l=b.value._id;if(!l)return;const{_flag:i,_list:r}=await(async()=>{let u=[];if(n==="create"){const F={...e};return u=[...h.value,F],{_flag:!0,_list:u}}const{value:w}=await J.fire({title:"Bạn có chắc là muốn xoá?",icon:"question",input:"text",html:'Vui lòng nhập vào <code class="code">"delete"</code> để xác nhận xoá',inputValue:"",inputPlaceholder:'Enter "delete" to delete',showCancelButton:!0,cancelButtonText:"Huỷ",confirmButtonText:"Xoá",customClass:{confirmButton:"btn btn-danger mx-1 bg-danger",cancelButton:"btn btn-secondary mx-1"},inputValidator:F=>{if(!F)return'Vui lòng nhập vào <span class="code">"delete"</span> để xác nhận xoá'}}),{index:B}=e;let D=[...h.value];return D.splice(B,1),{_flag:w==="delete",_list:D}})();i&&await q({_id:l,[a.fieldKey]:r},u=>{const{data:w}=u,B=w[a.fieldKey];c[a.fieldKey]=[...B],G().setGeneralInformation({[a.fieldKey]:c[a.fieldKey]})})}return(e,n)=>{const l=V("FontAwesomeIcon"),i=V("Heading");return _(),T(A,null,[d("div",W,[o(i,{text:a.heading},{default:f(()=>[a.hasButtonAdd?(_(),T("button",{key:0,class:"btn btn-sm btn-success",onClick:n[0]||(n[0]=r=>C())},[o(l,{icon:"fa-solid fa-plus"})])):N("",!0)]),_:1},8,["text"]),o(H,{"model-value":h.value,settings:a.fields,"cols-hidden":[],"col-control":"fullName","height-auto":!0},{theadMore:f(()=>[Y]),tbodyMore:f(({doc:r})=>[d("td",Z,[d("a",{class:"dropdown-item",href:"#",onClick:u=>k({...r},"delete")},[d("span",te,[o(l,{icon:"fa-solid fa-trash"})])],8,ee)])]),_:1},8,["model-value","settings"])]),a.hasButtonAdd?(_(),U(P,{key:0,ref_key:"refModal02",ref:v,title:m(p)._id?`Chỉnh sửa: ${a.heading}`:`Thêm mới ${a.heading}`,"is-hidden-footer":""},{default:f(()=>[d("div",ne,[o(K,{ref_key:"refVeeForm02",ref:g,fields:a.fields,document:m(p),"submit-fn":k,"submit-text":m(p)._id?"Cập nhật":"Thêm mới",buttonPosition:"end","reset-after-save":""},{button:f(()=>[ae]),_:1},8,["fields","document","submit-text"])])]),_:1},8,["title"])):N("",!0)],64)}}},s="Vui lòng nhập",le=[{name:"_id",label:"ID",type:"hidden",placeholder:"Vui lòng nhập Vị trí mong muốn",valid:t=>t.string().nullable().default(null),default:null},{name:"positionDesired",label:"Vị trí mong muốn",type:"text",placeholder:"Vui lòng nhập Vị trí mong muốn",valid:t=>t.string().max(50).trim().required(s),default:""},{name:"career",label:"Ngành nghề",type:"text",placeholder:"Vui lòng nhập Ngành nghề",valid:t=>t.string().max(50).trim().required(s),default:""},{name:"levelCurrent",label:"Cấp bậc hiện tại",type:"select",options:[{text:"Thực tập sinh",value:"intern"},{text:"Nhân viên",value:"staff"},{text:"Trưởng nhóm",value:"teamLeader"},{text:"Quản lý",value:"manager"},{text:"Phó giám đốc",value:"viceDirector"},{text:"Giám đốc",value:"director"},{text:"Tổng giám đốc",value:"ceo"}],default:"staff",placeholder:"Vui lòng nhập Cấp bậc hiện tại",valid:t=>t.string().max(50).trim().required(s),col:"col-md-6"},{name:"levelDesired",label:"Cấp bậc mong muốn",type:"select",options:[{text:"Thực tập sinh",value:"intern"},{text:"Nhân viên",value:"staff"},{text:"Trưởng nhóm",value:"teamLeader"},{text:"Quản lý",value:"manager"},{text:"Phó giám đốc",value:"viceDirector"},{text:"Giám đốc",value:"director"},{text:"Tổng giám đốc",value:"ceo"}],default:"staff",placeholder:"Vui lòng nhập Cấp bậc mong muốn",valid:t=>t.string().max(50).trim().required(s),col:"col-md-6"},{name:"education",label:"Trình độ",type:"select",options:[{text:"Trung học phổ thông",value:"highSchool"},{text:"Trung cấp/Cao đẳng",value:"associateDegree"},{text:"Đại học",value:"bachelorDegree"},{text:"Thạc sĩ",value:"masterDegree"},{text:"Tiến sĩ",value:"doctorateDegree"}],default:"bachelorDegree",placeholder:"Vui lòng nhập Trình độ",valid:t=>t.string().trim().max(50).required(s),col:"col-md-6"},{name:"yearsOfExperience",label:"Số năm kinh nghiệm",type:"number",placeholder:"Vui lòng nhập Số năm kinh nghiệm",valid:t=>t.number("Vui lòng nhập vào số").integer("Vui lòng nhập vào số nguyên").min(0,"Số năm kinh nghiệm phải lớn hơn 0").required(s),default:"",col:"col-md-6"},{name:"salaryDesired",label:"Mức lương mong muốn",type:"currency",placeholder:"Vui lòng nhập Mức lương mong muốn",valid:t=>t.number("Vui lòng nhập vào số").integer("Vui lòng nhập vào số nguyên").positive("Mức lương mong muốn phải lớn hơn 0").required(s),default:""},{name:"workForm",label:"Hình thức làm việc",type:"select",options:[{value:"fulltime",text:"Toàn thời gian"},{value:"parttime",text:"Bán thời gian"},{value:"temporary",text:"Thời vụ"},{value:"internship",text:"Thử việc"},{value:"freelance",text:"Freelance"},{value:"contract",text:"Hợp đồng"},{value:"remote",text:"Làm việc từ xa"},{value:"consultant",text:"Cộng tác viên"}],placeholder:"Vui lòng nhập Mức lương mong muốn",valid:t=>t.string().required(s),default:"fulltime"},{name:"workLocation",label:"Địa điểm làm việc",type:"text",default:"",placeholder:"Vui lòng nhập Địa điểm làm việc",valid:t=>t.string().required(s)},{name:"careerGoal",label:"Mục tiêu công việc",type:"ckediter",default:"",placeholder:"Vui lòng nhập Mức lương mong muốn",valid:t=>t.string().required(s)}],ie={class:"block-container mb-5"},oe={class:"btn-group"},re=d("hr",{class:"border-success mb-5"},null,-1),x="Vui lòng nhập",ge={__name:"PageGeneralInformation",setup(t){const b=M(!1),a=G(),v=Q(le),{generalInformation:g,getData:C}=j({field:"generalInformation",collection:"general-information"}),{document:c,updateDoc:h}=L({collection:"general-information",fields:v.value}),y=I(()=>{var e;return{_id:((e=a.getGeneralInformation)==null?void 0:e._id)||""}});z("candidate",y),X(()=>{b.value=!0}),$(g,e=>{const n=Array.isArray(e)?(e==null?void 0:e[0])||{}:e;for(const[l,i]of Object.entries(n))c[l]=i});async function p(e){const n={...e};await h(n,l=>{const{data:i}=l;a.setCandidateByField({generalInformation:[i]})})}const q=[{name:"language",label:"Ngôn ngữ",type:"text",placeholder:"Vui lòng nhập Ngôn ngữ",valid:e=>e.string().trim().max(100,"Tối đa 100 ký tự").required(x),default:""},{name:"level",label:"Cấp độ",type:"select",options:[{value:"basic",text:"Cơ bản"},{value:"intermediate",text:"Trung bình"},{value:"advanced",text:"Khá"},{value:"expert",text:"Giỏi"}],placeholder:"Vui lòng nhập Cấp độ",valid:e=>e.string().trim().max(100,"Tối đa 100 ký tự").required(x),default:""}],k=[{name:"name",label:"Kỹ năng",type:"text",placeholder:"Vui lòng nhập kỹ năng",valid:e=>e.string().trim().max(100,"Tối đa 100 ký tự").required(x),default:""},{name:"exp",label:"Năm kinh nghiệm",type:"number",placeholder:"Vui lòng nhập Năm kinh nghiệm",valid:e=>e.number("Vui lòng nhập vào số").positive("Số năm kinh nghiệm nhỏ nhất bằng 0").required(x),default:""}];return(e,n)=>{const l=V("Button"),i=V("Heading");return _(),T(A,null,[d("div",ie,[o(i,{text:"Thông tin chung"},{default:f(()=>[d("div",oe,[o(l,{onClick:n[0]||(n[0]=r=>{var u;return(u=m(C))==null?void 0:u()}),icon:"fa-solid fa-repeat",type:"outline-info",size:"sm"})])]),_:1}),o(K,{fields:v.value,document:m(c),"submit-fn":p,"submit-text":"Cập nhật"},null,8,["fields","document"])]),b.value?(_(),T(A,{key:0},[re,o(S,{key:"professionalSkills","model-value":m(g),heading:"Kỹ năng chuyên môn","field-key":"professionalSkills","has-button-add":!0,fields:k},null,8,["model-value"]),o(S,{key:"personalSkills","model-value":m(g),heading:"Kỹ năng cá nhân","field-key":"personalSkills","has-button-add":!0,fields:[{name:"name",label:"Kỹ năng",type:"text",placeholder:"Vui lòng nhập kỹ năng",valid:r=>r.string().trim().max(100,"Tối đa 100 ký tự").required(x),default:""}]},null,8,["model-value","fields"]),o(S,{key:"foreignLanguages","model-value":m(g),heading:"Ngoại ngữ","field-key":"foreignLanguages","has-button-add":!0,fields:q},null,8,["model-value"])],64)):N("",!0)],64)}}};export{ge as default};
