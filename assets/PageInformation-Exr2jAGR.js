import{_ as f}from"./VeeForm-BE4iP4uH.js";import{u as v,a as M}from"./useDocument-CzQCdGR-.js";import{g as N,s as w,h as D,j as q,c as B,b as p,a as h,k as b,e as C,F,r as T,o as r}from"./index-BVJ7n5iW.js";import{d as V,a as H,b as P,c as I}from"./model.type-COLLnu_S.js";import"./regex.config-BmDLDyGj.js";const s="Vui lòng nhập",G=[V,{name:"firstName",label:"Họ",type:"text",placeholder:"Vui lòng nhập Họ",valid:a=>a.string().min(0).max(10,"Tối đa 10 ký tự").required(s),default:"",col:"col-md-6"},{name:"lastName",label:"Tên",type:"text",placeholder:"Vui lòng nhập Tên",valid:a=>a.string().min(0).max(30,"Tối đa 30 ký tự").required(s),default:"",col:"col-md-6"},{name:"gender",label:"Giới tính",type:"select",options:[{value:0,text:"Nữ"},{value:1,text:"Nam"}],valid:a=>a.string().required(s),default:0,col:"col-md-6"},{name:"marital",label:"Tình trạng hôn nhân",type:"select",options:[{value:0,text:"Độc thân"},{value:1,text:"Đã kết hôn"}],valid:a=>a.string().required(s),default:0,col:"col-md-6"},H({name:"birthday",label:"Ngày sinh"}),{name:"address",label:"Địa chỉ",type:"text",valid:a=>a.string().required(s),default:"",col:"col-md-12"},P({name:"phone",label:"Số điện thoại"}),I({name:"introduction",label:"Giới thiệu bản thân"})],S={class:"block-container mb-5"},j={class:"block-container"},W={__name:"PageInformation",setup(a){const l=N(),{toast:d}=v(),u=w(G),m=D([{name:"socialMedia.github",label:"Github",type:"text",default:"",col:"col-md-12"},{name:"socialMedia.linkedin",label:"Linkedin",type:"text",default:"",col:"col-md-12"},{name:"socialMedia.website",label:"Website",type:"text",default:"",col:"col-md-12"}]),{document:c,updateDoc:g,updatePatchDoc:_}=M({collection:"candidate",fields:u.value});q(()=>{const i=l.getCandidate;for(const e of Object.keys(c))c[e]=i[e];const{socialMedia:n={}}=i;for(const e of m.value){const{name:t}=e,[,o]=t.split(".");e.value=n[o]||""}});async function y(i){const n={...i};n._id=l.getId,n._id||d==null||d({message:"Xảy ra lỗi",bg:"danger"});const e=(t=>(t.gender=!!t.gender,t.marital=!!t.marital,t.birthday=+new Date(t.birthday),t))({...n});await g(e,t=>{const{data:o}=t;l.setCandidateByField({...o})})}async function x(i){const{socialMedia:n}=i,e=l.getId;if(!e)return!1;await _({_id:e,socialMedia:n},t=>{const{data:o}=t,{socialMedia:k}=o;l.setCandidateByField({socialMedia:k})})}return(i,n)=>{const e=T("Heading");return r(),B(F,null,[p("div",S,[h(e,{text:"Thông tin cơ bản"}),(r(),b(f,{key:"frm1",fields:u.value,document:C(c),"submit-fn":y,"submit-text":"Cập nhật",buttonPosition:"center"},null,8,["fields","document"]))]),p("div",j,[h(e,{text:"Liên kết mạng xã hội"}),(r(),b(f,{key:"frm1",fields:m.value,"submit-fn":x,"submit-text":"Cập nhật",buttonPosition:"center"},null,8,["fields"]))])],64)}}};export{W as default};
