import{_ as u,t as w,f as k,g as R}from"./index-BVJ7n5iW.js";const b="api/v1/",N=async(i,l)=>{var t,a;const{email:r,password:h}=i,{loading:d=null,toast:e=null,router:o=null}=l;(t=w(d))==null||t.show();try{await u({method:"get",url:`${b}auth/login`,params:{email:r.trim(),password:h.trim()}}).then(async s=>{const{message:n}=s;e==null||e({message:n,bg:"success"});const{user:c,token:y,tokenRefresh:$}=s.data,p=k();p.setToken(y),p.setUser({...c});try{await(async()=>{const g={method:"get",url:`candidate/${r.trim()}`};await u(g).then(m=>{const{data:f}=m;R().setCandidate({...f})}).catch(m=>console.log(m))})()}catch(g){console.log(g)}o==null||o.push("/dashboard/information")}).catch(s=>{const{message:n}=s;e==null||e({message:n+"",bg:"danger"})})}catch(s){throw new Error(s)}(a=w(d))==null||a.hide()},S=async(i,l)=>{const{firstName:r,lastName:h,email:d,password:e,repassword:o}=i,{loading:t=null,toast:a=null,router:s=null}=l;t.show(),await u({method:"post",url:`${b}auth/register`,data:{firstName:r,lastName:h,email:d,password:e,repassword:o}}).then(n=>{const{message:c}=n;a==null||a({message:c,bg:"success"}),s==null||s.push("/login")}).catch(n=>{const{message:c}=n;a==null||a({message:c+"",bg:"danger"})}),t==null||t.hide()};export{S as a,N as h};
