import{E as C,k as y,h as I,N as w,r as M,o as h,c as v,b as l,A as S,a as x,e as F,z as k,p as B,H as N,g as z,n as H,O as V,t as f,P as $}from"./index-DAxs4nOd.js";import{u as A}from"./useDocument-SkqkMmzS.js";const D={class:"modal-content"},E={class:"modal-header"},G={class:"modal-title h5 m-0"},L={class:"ms-auto"},R={class:"btn btn-sm btn-outline-danger","data-bs-dismiss":"modal","aria-label":"Close"},T={class:"modal-body"},q={key:1},O={key:0,class:"modal-footer"},P=l("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Đóng",-1),J={__name:"Modal",props:{title:{type:String,default:"Modal Title"},size:{type:String,default:"modal-lg"},isHiddenFooter:{type:Boolean,default:!1}},setup(c,{expose:o}){const s=C(),u=c,t=y(null);let n=null;I(()=>{n=new w(t.value,{})});function m(){n==null||n.show()}function _(){n==null||n.hide()}return o({show:m,hide:_}),(r,g)=>{var e,a;const p=M("FontAwesomeIcon");return h(),v("div",{class:"modal draggable",tabindex:"-1",ref_key:"refModal",ref:t,"data-backdrop":"static"},[l("div",{class:N(["modal-dialog modal-dialog-scrollable",u.size])},[l("div",D,[l("div",E,[l("p",G,S(u.title),1),l("span",L,[l("span",R,[x(p,{icon:"fa-solid fa-xmark"})])])]),l("div",T,[(e=F(s))!=null&&e.default?k(r.$slots,"default",{key:0}):(h(),v("p",q,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Numquam, facilis!"))]),c.isHiddenFooter?B("",!0):(h(),v("div",O,[P,(a=F(s))!=null&&a.footer?k(r.$slots,"footer",{key:0}):B("",!0)]))])],2)],512)}}},K=c=>{const o=z(),s=y(c.field),u=c.collection||null,t=y([]),n=H(()=>o.getId);V(async()=>{let e=o.getCandidateByField(f(s));e.length||(e=await m()),t.value=e});async function m(){let e=[];const a=u||(s.value.endsWith("s")?s.value.slice(0,-1):s.value),{loading:d}=A();return await $({method:"get",url:`${a}/`},{loading:d,toast:null},i=>{const{data:b=[]}=i;e=b,o.setCandidateByField({[`${s.value}`]:b})}),e}function _(e){t.value=t.value.filter(a=>a._id!==e),o.setCandidateByField({[s.value]:f(t)})}function r(e){const{_id:a=null}=e;if(!a){t.value.push(e);return}const d=t.value.findIndex(i=>i._id===a);d>-1?t.value[d]=e:t.value.push(e),o.setCandidateByField({[s.value]:f(t)})}function g(e){const{field:a,values:d}=e,i=a;i===""&&o.setCandidateByField({[i]:d})}function p(e){o.setGeneralInformation(e)}return{canidateId:n,[f(s)]:t,removeRecordById:_,addRecordToList:r,updateField:g,updateGeneralInformationByField:p}};export{J as _,K as u};
