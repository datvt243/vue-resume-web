import{_ as N}from"./VeeForm-ZD-0KBCl.js";import{T as q}from"./TableDefault-Dwhu3YzW.js";import{u as R,_ as $}from"./useCandidate-BPS_kQnP.js";import{k as _,s as B,c as H,b as e,a,w as c,e as l,F as I,r as g,o as M,C as S}from"./index-DAxs4nOd.js";import{a as E}from"./useDocument-SkqkMmzS.js";import{p as L}from"./regex.config-BmDLDyGj.js";import"./TableDefault.vue_vue_type_style_index_1_scoped_121b7854_lang-OPqWGeeD.js";const m="Vui lòng nhập",b=[{name:"_id",label:"ID",type:"hidden",placeholder:"Vui lòng nhập ID",valid:n=>n.mixed().nullable().default(null),col:"col-md-12",default:null},{name:"fullName",label:"Họ tên người tham khảo",type:"text",placeholder:"Vui lòng nhập Họ tên người tham khảo",valid:n=>n.string().max(100,"Tối đa 100 ký tự").required(m),default:""},{name:"company",label:"Tên công ty",type:"text",placeholder:"Vui lòng nhập Tên công ty",valid:n=>n.string().max(100,"Tối đa 100 ký tự").required(m),default:""},{name:"position",label:"Vị trí công việc",type:"text",placeholder:"Vui lòng nhập Vị trí công việc",valid:n=>n.string().max(100,"Tối đa 100 ký tự").required(m),default:""},{name:"phone",label:"Số điện thoại",type:"text",valid:n=>n.string().matches(L,{excludeEmptyString:!0,message:"Số điện thoại không đúng định dạng. Bắt đầu bằng 84 hoặc 0, bao gồm 11 số"}).required(m),col:"col-md-12",default:""}],A={class:"mb-4"},P=["onClick"],O={class:"text-warning pe-2"},U=e("span",null,"Sửa",-1),X=e("li",null,[e("hr",{class:"dropdown-divider"})],-1),j=["onClick"],z={class:"text-danger pe-2"},G=e("span",null,"Xoá",-1),J={class:"block-container"},K=e("button",{type:"button",class:"btn btn-secondary mx-3","data-bs-dismiss":"modal"},"Đóng",-1),oe={__name:"PageReference",setup(n){const{references:v,removeRecordById:k,addRecordToList:x}=R({field:"references"}),y=["_id"],{document:i,updateDoc:w,deleteDoc:C}=E({collection:"reference",fields:b}),u=_(),h=_(),r=B(b);async function V(s){await w({...s},o=>{const{data:t}=o;x(t)})}function T(s){var t;const o=r.value.map(d=>d.name);for(const d of new Set(["_id",...o]))i[d]=s[d];(t=u.value)==null||t.show()}function D(){var s,o;for(const t of r.value)i[t.name]=t.default;(s=u.value)==null||s.show(),(o=h.value)==null||o.reset()}return(s,o)=>{const t=g("FontAwesomeIcon"),d=g("Heading");return M(),H(I,null,[e("div",A,[a(d,{text:"Người tham khảo"},{default:c(()=>[e("button",{class:"btn btn-sm btn-success",onClick:o[0]||(o[0]=f=>D())},[a(t,{icon:"fa-solid fa-plus"})])]),_:1}),a(q,{"model-value":l(v),settings:r.value,"cols-hidden":y,"col-control":"fullName"},{control:c(({doc:f})=>[a(S,{text:"",style:"outline-success border-0",split:""},{default:c(()=>[e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:p=>T({...f})},[e("span",O,[a(t,{icon:"fa-solid fa-square-pen"})]),U],8,P)]),X,e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:()=>{l(C)({...f},"fullName",p=>{const{data:F}=p;l(k)(F._id)})}},[e("span",z,[a(t,{icon:"fa-solid fa-trash"})]),G],8,j)])]),_:2},1024)]),_:1},8,["model-value","settings"])]),a($,{ref_key:"refModal",ref:u,title:l(i)._id?`Chỉnh sửa: ${l(i).school}`:"Thêm mới Người tham khảo","is-hidden-footer":""},{default:c(()=>[e("div",J,[a(N,{ref_key:"refVeeForm",ref:h,fields:r.value,document:l(i),"submit-fn":V,"submit-text":l(i)._id?"Cập nhật":"Thêm mới",buttonPosition:"end"},{button:c(()=>[K]),_:1},8,["fields","document","submit-text"])])]),_:1},8,["title"])],64)}}};export{oe as default};
