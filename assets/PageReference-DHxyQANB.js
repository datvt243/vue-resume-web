import{_ as $}from"./VeeForm-CWEsd3gj.js";import{T as q}from"./TableDefault-CYo4iB2T.js";import{u as H,_ as M}from"./Modal-Biz4i9BD.js";import{a as I}from"./useDocument-DjZvQOz-.js";import{d as E,b as L}from"./model.type-neKQSWFc.js";import{h as b,s as P,r as _,o as g,c as S,b as e,a as n,w as m,k as A,e as s,d as z,T as O,F as U,B as X}from"./index-_cXkeK-O.js";const p="Vui lòng nhập",v=[E,{name:"fullName",label:"Họ tên người tham khảo",type:"text",placeholder:"Vui lòng nhập Họ tên người tham khảo",valid:l=>l.string().max(100,"Tối đa 100 ký tự").required(p),default:""},{name:"company",label:"Tên công ty",type:"text",placeholder:"Vui lòng nhập Tên công ty",valid:l=>l.string().max(100,"Tối đa 100 ký tự").required(p),default:""},{name:"position",label:"Vị trí công việc",type:"text",placeholder:"Vui lòng nhập Vị trí công việc",valid:l=>l.string().max(100,"Tối đa 100 ký tự").required(p),default:""},L({name:"phone",label:"Số điện thoại"})],j={class:"mb-4"},G=["onClick"],J={class:"text-warning pe-2"},K=e("span",null,"Sửa",-1),Q=e("li",null,[e("hr",{class:"dropdown-divider"})],-1),W=["onClick"],Y={class:"text-danger pe-2"},Z=e("span",null,"Xoá",-1),ee={class:"block-container"},te=e("button",{type:"button",class:"btn btn-secondary mx-3","data-bs-dismiss":"modal"},"Đóng",-1),de={__name:"PageReference",setup(l){const{references:k,removeRecordById:w,addRecordToList:x,getData:y}=H({field:"references"}),C=["_id"],{document:i,updateDoc:T,deleteDoc:V}=I({collection:"reference",fields:v}),f=b(),h=b(),u=P(v);async function D(a){await T({...a},o=>{const{data:t}=o;x(t)})}function N(a){var t;const o=u.value.map(d=>d.name);for(const d of new Set(["_id",...o]))i[d]=a[d];(t=f.value)==null||t.show()}function F(){var a,o;for(const t of u.value)i[t.name]=t.default;(a=f.value)==null||a.show(),(o=h.value)==null||o.reset()}return(a,o)=>{const t=_("FontAwesomeIcon"),d=_("Heading"),B=_("Dropdown");return g(),S(U,null,[e("div",j,[n(d,{text:"Người tham khảo"},{default:m(()=>[e("button",{class:"btn btn-sm btn-success",onClick:o[0]||(o[0]=c=>F())},[n(t,{icon:"fa-solid fa-plus"})])]),_:1}),(g(),A(O,{to:"#reload"},[e("button",{class:"btn btn-sm btn-outline-info",onClick:o[1]||(o[1]=c=>{var r;return(r=s(y))==null?void 0:r()})},[n(t,{icon:"fa-solid fa-repeat"}),z(" Reload ")])])),n(q,{"model-value":s(k),settings:u.value,"cols-hidden":C,"col-control":"fullName"},{control:m(({doc:c})=>[n(B,{text:"",style:"outline-success border-0",split:""},{default:m(()=>[e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:r=>N({...c})},[e("span",J,[n(t,{icon:"fa-solid fa-square-pen"})]),K],8,G)]),Q,e("li",null,[e("a",{class:X(["dropdown-item",{disabled:!c._id}]),href:"#",onClick:()=>{s(V)({...c},"fullName",r=>{const{data:R}=r;s(w)(R._id)})}},[e("span",Y,[n(t,{icon:"fa-solid fa-trash"})]),Z],10,W)])]),_:2},1024)]),_:1},8,["model-value","settings"])]),n(M,{ref_key:"refModal",ref:f,title:s(i)._id?`Chỉnh sửa: ${s(i).school}`:"Thêm mới Người tham khảo","is-hidden-footer":""},{default:m(()=>[e("div",ee,[n($,{ref_key:"refVeeForm",ref:h,fields:u.value,document:s(i),"submit-fn":D,"submit-text":s(i)._id?"Cập nhật":"Thêm mới",buttonPosition:"end"},{button:m(()=>[te]),_:1},8,["fields","document","submit-text"])])]),_:1},8,["title"])],64)}}};export{de as default};
