import{_ as g,t as p,g as y,e as b}from"./index-CpXno4mj.js";const w="api/v1/",R=async(d,m)=>{var n,a;const{email:i,password:u}=d,{loading:h=null,toast:r=null,router:c=null}=m;(n=p(h))==null||n.show();try{await g({method:"get",url:`${w}auth/login`,params:{email:i.trim(),password:u.trim()}}).then(async e=>{const{message:t}=e;r==null||r({message:t,bg:"success"});const{user:s,token:o,tokenRefresh:l}=e.data;return{email:i.trim(),token:o,user:s}}).then(async e=>{const{email:t,token:s,user:o}=e;try{await g({method:"get",url:`${w}candidate/${t.trim()}`,token:s}).then(l=>{const{data:k}=l;y().setCandidate({...k})})}catch(l){throw new Error(l)}return{token:s,user:o}}).then(e=>{const{token:t,user:s}=e,o=b();o.setToken(t),o.setUser({...s}),c==null||c.push("/dashboard/information")}).catch(e=>{console.log(e)})}catch(e){throw new Error(e)}(a=p(h))==null||a.hide()},x=async(d,m)=>{const{firstName:i,lastName:u,email:h,password:r,repassword:c}=d,{loading:n=null,toast:a=null,router:e=null}=m;n.show(),await g({method:"post",url:`${w}auth/register`,data:{firstName:i,lastName:u,email:h,password:r,repassword:c}}).then(t=>{const{message:s}=t;a==null||a({message:s,bg:"success"}),e==null||e.push("/login")}).catch(t=>{const{message:s}=t;a==null||a({message:s+"",bg:"danger"})}),n==null||n.hide()};export{x as a,R as h};
