import{_ as g,t as p,f as y,g as $}from"./index-_cXkeK-O.js";const u="api/v1/",E=async(i,h)=>{var t,a;const{email:c,password:l}=i,{loading:d=null,toast:e=null,router:o=null}=h;(t=p(d))==null||t.show();try{await g({method:"get",url:`${u}auth/login`,params:{email:c.trim(),password:l.trim()}}).then(async s=>{const{message:n}=s;e==null||e({message:n,bg:"success"});const{user:r,token:b,tokenRefresh:k}=s.data,w=y();w.setToken(b),w.setUser({...r});try{await g({method:"get",url:`${u}candidate/${c.trim()}`}).then(m=>{const{data:f}=m;$().setCandidate({...f})})}catch(m){throw new Error(m)}o==null||o.push("/dashboard/information")}).catch(s=>{const{message:n}=s;e==null||e({message:n+"",bg:"danger"})})}catch(s){throw new Error(s)}(a=p(d))==null||a.hide()},L=async(i,h)=>{const{firstName:c,lastName:l,email:d,password:e,repassword:o}=i,{loading:t=null,toast:a=null,router:s=null}=h;t.show(),await g({method:"post",url:`${u}auth/register`,data:{firstName:c,lastName:l,email:d,password:e,repassword:o}}).then(n=>{const{message:r}=n;a==null||a({message:r,bg:"success"}),s==null||s.push("/login")}).catch(n=>{const{message:r}=n;a==null||a({message:r+"",bg:"danger"})}),t==null||t.hide()};export{L as a,E as h};
