import{_ as q}from"./VeeForm-Duwk6dER.js";import{T as H}from"./TableDefault-C3WvCllL.js";import{u as M,_ as R}from"./Modal-DFIulcsf.js";import{a as I}from"./useDocument-p6YVppS_.js";import{d as z,b as E}from"./model.type-CRXh7ZqH.js";import{h as v,s as L,r as f,o as P,c as S,b as e,a as n,w as m,f as s,F as A,C as O}from"./index-DhJAbDsU.js";const p="Vui lòng nhập",b=[z,{name:"fullName",label:"Họ tên người tham khảo",type:"text",placeholder:"Vui lòng nhập Họ tên người tham khảo",valid:l=>l.string().max(100,"Tối đa 100 ký tự").required(p),default:""},{name:"company",label:"Tên công ty",type:"text",placeholder:"Vui lòng nhập Tên công ty",valid:l=>l.string().max(100,"Tối đa 100 ký tự").required(p),default:""},{name:"position",label:"Vị trí công việc",type:"text",placeholder:"Vui lòng nhập Vị trí công việc",valid:l=>l.string().max(100,"Tối đa 100 ký tự").required(p),default:""},E({name:"phone",label:"Số điện thoại"})],U={class:"mb-4"},X={class:"btn-group"},j=["onClick"],G={class:"text-warning pe-2"},J=e("span",null,"Sửa",-1),K=e("li",null,[e("hr",{class:"dropdown-divider"})],-1),Q=["onClick"],W={class:"text-danger pe-2"},Y=e("span",null,"Xoá",-1),Z={class:"block-container"},ee=e("button",{type:"button",class:"btn btn-secondary mx-3","data-bs-dismiss":"modal"},"Đóng",-1),ie={__name:"PageReference",setup(l){const{references:k,removeRecordById:w,addRecordToList:x,getData:y}=M({field:"references"}),C=["_id"],{document:i,updateDoc:D,deleteDoc:T}=I({collection:"reference",fields:b}),_=v(),h=v(),u=L(b);async function V(a){await D({...a},t=>{const{data:o}=t;x(o)})}function N(a){var o;const t=u.value.map(d=>d.name);for(const d of new Set(["_id",...t]))i[d]=a[d];(o=_.value)==null||o.show()}function F(){var a,t;for(const o of u.value)i[o.name]=o.default;(a=_.value)==null||a.show(),(t=h.value)==null||t.reset()}return(a,t)=>{const o=f("Button"),d=f("Heading"),g=f("FontAwesomeIcon"),B=f("Dropdown");return P(),S(A,null,[e("div",U,[n(d,{text:"Người tham khảo"},{default:m(()=>[e("div",X,[n(o,{onClick:t[0]||(t[0]=c=>F()),icon:"fa-solid fa-plus",type:"outline-success",size:"sm"}),n(o,{onClick:t[1]||(t[1]=c=>{var r;return(r=s(y))==null?void 0:r()}),icon:"fa-solid fa-repeat",type:"outline-info",size:"sm"})])]),_:1}),n(H,{"model-value":s(k),settings:u.value,"cols-hidden":C,"col-control":"fullName"},{control:m(({doc:c})=>[n(B,{text:"",style:"outline-success border-0",split:""},{default:m(()=>[e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:r=>N({...c})},[e("span",G,[n(g,{icon:"fa-solid fa-square-pen"})]),J],8,j)]),K,e("li",null,[e("a",{class:O(["dropdown-item",{disabled:!c._id}]),href:"#",onClick:()=>{s(T)({...c},"fullName",r=>{const{data:$}=r;s(w)($._id)})}},[e("span",W,[n(g,{icon:"fa-solid fa-trash"})]),Y],10,Q)])]),_:2},1024)]),_:1},8,["model-value","settings"])]),n(R,{ref_key:"refModal",ref:_,title:s(i)._id?`Chỉnh sửa: ${s(i).fullName}`:"Thêm mới Người tham khảo","is-hidden-footer":""},{default:m(()=>[e("div",Z,[n(q,{ref_key:"refVeeForm",ref:h,fields:u.value,document:s(i),"submit-fn":V,"submit-text":s(i)._id?"Cập nhật":"Thêm mới",buttonPosition:"end"},{button:m(()=>[ee]),_:1},8,["fields","document","submit-text"])])]),_:1},8,["title"])],64)}}};export{ie as default};
