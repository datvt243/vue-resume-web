import{_ as L}from"./VeeForm-D5DYDv5y.js";import{u as O,_ as P}from"./Modal-DO1FLvFb.js";import{E as R,p as C,G as V,r as f,o as p,k as I,w as h,b as m,a as l,h as $,s as j,c as k,f as u,F as M,C as H}from"./index-Bps_l_in.js";import{a as K}from"./useDocument-2iNXWpIi.js";const z={class:"btn-group"},A=R({__name:"ExperienceItem",props:{modelValue:{type:Object,default:()=>({_id:"",company:"",position:"",startDate:+new Date,endDate:+new Date,isCurrent:!1,description:"",image:"",website:""})}},emits:["onEdit","onDelete"],setup(t,{emit:b}){const v=b,D=t,c=C(()=>D.modelValue),s=C(()=>{const{startDate:g,endDate:o,isCurrent:d}=D.modelValue,r=V(g,"MM/YYYY"),_=d?"Hiện tại":V(o,"MM/YYYY");return`${r} - ${_}`}),w=C(()=>({title:c.value.company,subTitle:c.value.position,date:s.value,description:c.value.description}));return(g,o)=>{const d=f("FontAwesomeIcon"),r=f("ItemTemplate");return p(),I(r,{"model-value":w.value},{default:h(()=>[m("div",z,[m("a",{class:"btn btn-sm btn-outline-danger icon",href:"javascript:void(0)",onClick:o[0]||(o[0]=_=>v("onDelete",{...c.value}))},[l(d,{icon:"fa-solid fa-trash"})]),m("a",{class:"btn btn-sm btn-outline-warning icon",href:"javascript:void(0)",onClick:o[1]||(o[1]=_=>v("onEdit",{...c.value}))},[l(d,{icon:"fa-solid fa-square-pen"})])])]),_:1},8,["model-value"])}}}),x="Vui lòng nhập",E=[{name:"_id",label:"ID",type:"hidden",placeholder:"Vui lòng nhập ID",valid:t=>t.mixed().nullable().default(null),col:"col-md-12",default:null},{name:"company",label:"Tên công ty",type:"text",placeholder:"Vui lòng nhập Tên công ty",valid:t=>t.string().max(100,"Tối đa 100 ký tự").required(x),default:""},{name:"position",label:"Vị trí",type:"text",placeholder:"Vui lòng nhập Vị trí",valid:t=>t.string().max(50,"Tối đa 50 ký tự").required(x),default:""},{name:"startDate",label:"Ngày bắt đầu",type:"date",placeholder:"Vui lòng nhập Ngày bắt đầu",valid:t=>t.number().required(x),col:"col-md-6",convertTo:"date",default:+new Date,monthPicker:!0},{name:"endDate",label:"Ngày Kết thúc",type:"date",placeholder:"Vui lòng nhập Ngày Kết thúc",valid:t=>t.number().nullable(),col:"col-md-6",convertTo:"date",default:+new Date,monthPicker:!0},{name:"isCurrent",label:"Đang làm việc tại đây",type:"checkbox",placeholder:"",default:!1,valid:t=>t.boolean(),col:"col-md-12",cellClass:"text-center",convertTo:"boolean",checkedValue:!1},{name:"description",label:"Mô tả",type:"ckediter",valid:t=>t.string().required(x),col:"col-md-12",convertTo:"truncate",default:""}],G={class:"mb-4"},S={class:"btn-group"},U={key:0,class:"clearfix"},J={class:"block-container"},Q=m("button",{type:"button",class:"btn btn-secondary mx-3","data-bs-dismiss":"modal"},"Đóng",-1),te={__name:"PageExperience",setup(t){const{experiences:b,removeRecordById:v,addRecordToList:D,getData:c}=O({field:"experiences"}),{document:s,updateDoc:w,deleteDoc:g}=K({collection:"experience",fields:E}),o=$(),d=$(),r=j(E);async function _(a){const n=(e=>(e.startDate=+new Date(e.startDate),e.endDate=+new Date(e.endDate),!e.isCurrent&&(e.isCurrent=!1),e))({...a});await w(n,e=>{const{data:i}=e;D(i)})}async function N(a){g({...a},"company",n=>{const{data:e}=n;v(e._id)})}function Y(a){var e;const n=r.value.map(i=>i.name);for(const i of new Set(["_id",...n]))s[i]=a[i];(e=o.value)==null||e.show()}function B(){var a,n;for(const e of r.value)s[e.name]=e.default;(a=o.value)==null||a.show(),(n=d.value)==null||n.reset()}return(a,n)=>{const e=f("Button"),i=f("Heading"),F=f("ListTransition"),q=f("NoData");return p(),k(M,null,[m("div",G,[l(i,{text:"Kinh nghiệm làm việc"},{default:h(()=>[m("div",S,[l(e,{onClick:n[0]||(n[0]=y=>B()),icon:"fa-solid fa-plus",type:"outline-success",size:"sm"}),l(e,{onClick:n[1]||(n[1]=y=>{var T;return(T=u(c))==null?void 0:T()}),icon:"fa-solid fa-repeat",type:"outline-info",size:"sm"})])]),_:1}),u(b).length?(p(),k("div",U,[l(F,null,{default:h(()=>[(p(!0),k(M,null,H(u(b),y=>(p(),k("li",{key:y._id},[l(A,{"model-value":y,icon:"fa-building",onOnEdit:Y,onOnDelete:N},null,8,["model-value"])]))),128))]),_:1})])):(p(),I(q,{key:1}))]),l(P,{ref_key:"refModal",ref:o,title:u(s)._id?`Chỉnh sửa: ${u(s).company}`:"Thêm mới kinh nghiệm làm việc","is-hidden-footer":""},{default:h(()=>[m("div",J,[l(L,{ref_key:"refVeeForm",ref:d,fields:r.value,document:u(s),"submit-fn":_,"submit-text":u(s)._id?"Cập nhật":"Thêm mới",buttonPosition:"end"},{button:h(()=>[Q]),_:1},8,["fields","document","submit-text"])])]),_:1},8,["title"])],64)}}};export{te as default};
